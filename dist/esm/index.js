import{Checkbox as e,NumberInput as t,NumberInputField as n,NumberInputStepper as r,NumberIncrementStepper as a,NumberDecrementStepper as o,Center as l,HStack as i,PinInput as u,PinInputField as c,Skeleton as s,Select as f,RangeSlider as d,RangeSliderTrack as m,RangeSliderFilledTrack as v,RangeSliderThumb as p,Badge as h,Switch as g,Textarea as y,Input as b,useToast as E,Box as w,FormControl as x,FormLabel as C,FormHelperText as S,FormErrorMessage as P,Button as k}from"@chakra-ui/react";import F,{forwardRef as O,useState as j,useEffect as V,useCallback as T}from"react";import{get as z,set as I,appendErrors as U,useForm as L,FormProvider as N,Controller as A}from"react-hook-form";import{useTranslation as q}from"react-i18next";import{Editor as M}from"@tinymce/tinymce-react";import R from"axios";import{useQuery as _,useMutation as B}from"react-query";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var D=function(){return(D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function G(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function H(e,t,n,r){return new(n||(n=Promise))((function(a,o){function l(e){try{u(r.next(e))}catch(e){o(e)}}function i(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}u((r=r.apply(e,t||[])).next())}))}function K(e,t){var n,r,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,r=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(a=l.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){l.label=o[1];break}if(6===o[0]&&l.label<a[1]){l.label=a[1],a=o;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(o);break}a[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}var W=function(t){var n=G(t,[]);return F.createElement(e,{onChange:n.onChange})},Y=function(e){var t=G(e,[]);return F.createElement(M,{value:t.value,tinymceScriptSrc:"/tinymce.min.js",onEditorChange:function(e){return t.onChange(e)},init:{directionality:"rtl",language:"fa",mobile:{menubar:!1,toolbar:"undo redo | formatselect | bold italic backcolor"},height:300,menubar:!0,plugins:["code"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat"}})},$=O((function(e,l){var i=G(e,[]);return F.createElement(t,D({ref:l},i,{size:"sm",inputMode:"numeric",min:0,max:1/0,value:i.value||0===i.value?i.value:""}),F.createElement(n,{bg:"#F0F5F7",p:"6"}),F.createElement(r,null,F.createElement(a,null),F.createElement(o,null)))})),J=function(e){var t=G(e,[]);return F.createElement(l,{dir:"ltr"},F.createElement(i,null,F.createElement(u,{otp:!0,onChange:function(e){return t.onChange(e)},isInvalid:t.isInvalid,autoFocus:!0,size:"lg"},function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}([],Array(t.count)).map((function(e,t){return F.createElement(c,{key:t})})))))},Q=function(){return F.createElement(s,{h:"12"})},X=O((function(e,t){var n=G(e,[]);return n.options?F.createElement(Z,D({ref:t},n)):n.fetchUrl?F.createElement(ee,D({ref:t},n)):F.createElement(f,null)})),Z=O((function(e,t){var n,r=G(e,[]);return F.createElement(f,{ref:t,onChange:r.onChange,bg:"#F0F5F7",size:"lg",fontSize:"sm"},null===(n=r.options)||void 0===n?void 0:n.map((function(e){return F.createElement("option",{value:e.value,key:e.value},e.label)})))})),ee=O((function(e,t){var n=G(e,[]),r=_(n.fetchUrl,(function(){return R.get(n.fetchUrl).then((function(e){return e.data}))}),{select:function(e){return e.items.map((function(e){return{label:n.labelProperty?e[n.labelProperty]:e.label,value:n.valueProperty?e[n.valueProperty]:e.value}}))}}),a=r.data;return r.isLoading?F.createElement(Q,null):F.createElement(Z,D({ref:t,options:a},n))})),te=function(e){var t=G(e,[]),n=j(),r=n[0],a=n[1];return F.createElement(F.Fragment,null,F.createElement(d,D({"aria-label":["min","max"],min:1300,max:1401,defaultValue:[1350,1380]},t,{onChangeEnd:function(e){return a(e)}}),F.createElement(m,null,F.createElement(v,null)),F.createElement(p,{index:0}),F.createElement(p,{index:1})),F.createElement(l,null,F.createElement(h,{colorScheme:"blue",py:"1",px:"4"},null==r?void 0:r[0]," - ",null==r?void 0:r[1])))},ne=function(e){var t=G(e,[]);return F.createElement(g,{onChange:t.onChange})},re=function(e){var t=G(e,[]);return F.createElement(y,D({},t,{bg:"#F0F5F7"}))},ae=O((function(e,t){var n=G(e,[]);return F.createElement(b,D({},n,{onChange:n.onChange,ref:t,value:n.value||"",bg:"#f0f5f7",p:"6",color:"#696969",_focus:{bg:"white",border:"1px solid #1967D2"}}))})),oe=function(e,t,n){if(e&&"reportValidity"in e){var r=z(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},le=function(e,t){var n=function(n){var r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?oe(r.ref,n,e):r.refs&&r.refs.forEach((function(t){return oe(t,n,e)}))};for(var r in t.fields)n(r)},ie=function(e,t){t.shouldUseNativeValidation&&le(e,t);var n={};for(var r in e){var a=z(t.fields,r);I(n,r,Object.assign(e[r],{ref:a&&a.ref}))}return n},ue=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),function(r,a,o){try{return Promise.resolve(function(l,i){try{var u=(t.context&&"development"===process.env.NODE_ENV&&console.warn("You should not used the yup options context. Please, use the 'useForm' context object instead"),Promise.resolve(e["sync"===n.mode?"validateSync":"validate"](r,Object.assign({abortEarly:!1},t,{context:a}))).then((function(e){return o.shouldUseNativeValidation&&le({},o),{values:e,errors:{}}})))}catch(e){return i(e)}return u&&u.then?u.then(void 0,i):u}(0,(function(e){if(!e.inner)throw e;return{values:{},errors:ie((t=e,n=!o.shouldUseNativeValidation&&"all"===o.criteriaMode,(t.inner||[]).reduce((function(e,t){if(e[t.path]||(e[t.path]={message:t.message,type:t.type}),n){var r=e[t.path].types,a=r&&r[t.type];e[t.path]=U(t.path,n,e,t.type,a?[].concat(a,t.message):t.message)}return e}),{})),o)};var t,n})))}catch(e){return Promise.reject(e)}}},ce=function(e,t,n){var r=j(null),a=r[0],o=r[1];return V((function(){!function(e,t,n){var r=document.getElementById(e);if(r){var a=window.grecaptcha;o(a)}else{var l=document.createElement("script");l.type="text/javascript",l.src=t,l.id=e,l.onload=function(){var e=window.grecaptcha;e.ready((function(){o(e)}))},document.body.appendChild(l)}r&&n&&n()}("recaptcha-key","https://www.google.com/recaptcha/api.js?render="+t,(function(){}))}),[e]),[T((function(){return H(void 0,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:if(!a||!a.execute)throw new Error("Google Recaptcha has not been loaded");return[4,a.execute(t,{action:"submit"})];case 1:return[2,e.sent()]}}))}))}),[a])]},se=F.createContext(void 0);function fe(e){var t=this,n=E({position:"top",isClosable:!0,variant:"top-accent"}),r=ce("recaptcha-key",e.recaptchaApiKey)[0],a=e.formSchema.describe(),o=B(e.mutationFunction),l=L({resolver:ue(e.formSchema),defaultValues:e.defaultValues?e.defaultValues:void 0});return F.createElement(se.Provider,{value:{formSchema:a,control:l.control,translation:e.translation,router:e.router,isLoading:o.isLoading,isError:o.isError}},F.createElement(N,D({},l),F.createElement("form",{noValidate:!0,style:{width:"100%"},onSubmit:l.handleSubmit((function(a){return H(t,void 0,void 0,(function(){var t;return K(this,(function(l){switch(l.label){case 0:return e.doesHaveRecaptcha?[4,r()]:[3,2];case 1:t=l.sent(),a=D(D({},a),{captchaToken:t}),l.label=2;case 2:return o.mutate(a,{onSuccess:function(t){e.showToastOnSuccess&&n({title:e.successToastMessage,status:"success"}),e.onSubmitSucess&&e.onSubmitSucess(t.data,a)},onError:function(e){n({title:e.code,description:e.message,status:"error"})}}),console.log(a),[2]}}))}))}),(function(t){e.onError?e.onError(t):console.log(t)}))},e.children)))}function de(){var e=F.useContext(se);if(void 0===e)throw new Error("useAminook must be used within a FormBuilder Tag");return e}var me=O((function(e,t){var n,r,a,o,l,i,u,c,s=G(e,[]),f=q("validations")[0],d=de(),m=d.translation,v=d.router,p=de().formSchema.fields[s.name],h=null!==(n=null==p?void 0:p.meta)&&void 0!==n?n:s.fieldSetting,g={name:s.name,value:s.value};return F.createElement(w,{my:s.my,mx:s.mx,display:"inline-block",w:{base:null!==(a=null===(r=s.width)||void 0===r?void 0:r.base)&&void 0!==a?a:"full",md:null!==(l=null===(o=s.width)||void 0===o?void 0:o.md)&&void 0!==l?l:"full"}},F.createElement(x,{display:s.hidden?"none":"initial",isInvalid:!!s.error,isRequired:null!==(i=null==p?void 0:p.tests.some((function(e){return"required"===e.name})))&&void 0!==i&&i},!(null==h?void 0:h.hideLabel)&&F.createElement(C,{htmlFor:s.name,fontSize:"sm",fontWeight:"bold"},(null==p?void 0:p.label)?p.label:(null===(u=s.fieldSetting)||void 0===u?void 0:u.label)?null===(c=s.fieldSetting)||void 0===c?void 0:c.label:m((v?v.pathname:window.location.pathname)+".form.labels."+s.name)),function(){var e,n;switch(null!==(e=null==h?void 0:h.type)&&void 0!==e?e:null===(n=s.fieldSetting)||void 0===n?void 0:n.type){case"input-text":case"input-mask":return F.createElement(ae,D({ref:t},D(D({},g),null==h?void 0:h.fieldProps),{onChange:function(e){s.onChange(function(e){var t=[/۰/g,/۱/g,/۲/g,/۳/g,/۴/g,/۵/g,/۶/g,/۷/g,/۸/g,/۹/g],n=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g];if("string"==typeof e)for(var r=0;r<10;r++)e=e.replace(t[r],r.toString()).replace(n[r],r.toString());return e}(e.target.value))}}));case"input-number":return F.createElement($,D({ref:t},D(D({},g),null==h?void 0:h.fieldProps),{onChange:function(e,t){s.onChange(t)}}));case"checkbox":return F.createElement(W,D({},null==h?void 0:h.fieldProps,g,{onChange:function(e){return s.onChange(e.target.checked,e)}}));case"select":return F.createElement(X,D({ref:t},null==h?void 0:h.fieldProps,g,{onChange:function(e){return s.onChange(e.target.value,e)}}));case"switch":return F.createElement(ne,D({},g,null==h?void 0:h.fieldProps,{onChange:function(e){return s.onChange(e.target.checked)}}));case"text-area":case"text-area":return F.createElement(re,D({},g,null==h?void 0:h.fieldProps,{onChange:function(e){return s.onChange(e.target.value,e)}}));case"slider":return F.createElement(te,D({},s,null==h?void 0:h.fieldProps));case"input-pin":return F.createElement(J,D({},g,null==h?void 0:h.fieldProps,{isInvalid:!!s.error,onChange:function(e){return s.onChange(e)}}));case"editor":return F.createElement(Y,{value:s.value,onChange:function(e){return s.onChange(e)}});default:return F.createElement(w,null,"Unrecognized field type.")}}(),!!(null==h?void 0:h.helperText)&&F.createElement(S,{fontSize:"xs"},null==h?void 0:h.helperText),!!s.error&&F.createElement(P,{fontSize:"xs"},m?f(s.error.type,{path:m((v?v.pathname:window.location.pathname)+".form.labels."+s.name),value:s.value}):s.error.message)))})),ve=function(e){var t=G(e,[]),n=de().control;return F.createElement(A,{name:t.name,control:n,render:function(e){var n=e.field,r=e.fieldState;return e.formState,F.createElement(me,D({error:r.error},D(D(D({},t),r),n)))}})},pe=function(e){e.type;var t=e.text;e.onClick;var n=de().isLoading;return F.createElement(w,{mt:"10"},F.createElement(k,{isLoading:n,loadingText:"در حال ذخیره اطلاعات...",type:"submit",variant:"primary_dark"},t))},he=/09(1[0-9]|3[1-9]|2[1-9])-?[0-9]{3}-?[0-9]{4}/,ge=/^0[0-9]{2,}[0-9]{7,}$/;export{ve as ControlledFormControl,fe as FormBuilder,me as FormControl,pe as FormSubmitButton,X as Select,he as mobileIranValidation,ge as phoneNumberIranValidation,de as useAminook};
//# sourceMappingURL=index.js.map

import{ChakraFileUploader as e}from"@aminbaghbanzadeh/chakra-file-uploader";import{Checkbox as n,NumberInput as t,NumberInputField as r,NumberInputStepper as o,NumberIncrementStepper as a,NumberDecrementStepper as l,Center as i,HStack as u,PinInput as c,PinInputField as s,Spinner as f,RangeSlider as d,RangeSliderTrack as m,RangeSliderFilledTrack as p,RangeSliderThumb as v,Badge as g,Switch as h,Textarea as b,Input as y,useToast as E,Skeleton as C,Select as w,Box as S,FormControl as x,FormLabel as k,FormHelperText as P,FormErrorMessage as F,Button as z}from"@chakra-ui/react";import O,{forwardRef as I,useState as j,useEffect as T,useCallback as V}from"react";import{useForm as M,FormProvider as L,Controller as R}from"react-hook-form";import{useTranslation as A}from"react-i18next";import{Editor as N}from"@tinymce/tinymce-react";import U from"axios";import{AsyncPaginate as D}from"react-select-async-paginate";import{yupResolver as q}from"@hookform/resolvers/yup";import{useMutation as B,useQuery as G}from"react-query";import H from"react-select/creatable";import{string as K,number as Q}from"yup";var _=function(){return(_=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function W(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}function $(e,n,t,r){return new(t||(t=Promise))((function(o,a){function l(e){try{u(r.next(e))}catch(e){a(e)}}function i(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(l,i)}u((r=r.apply(e,n||[])).next())}))}function J(e,n){var t,r,o,a,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,r=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(o=l.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){l.label=a[1];break}if(6===a[0]&&l.label<o[1]){l.label=o[1],o=a;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(a);break}o[2]&&l.ops.pop(),l.trys.pop();continue}a=n.call(e,l)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}function X(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}var Y=I((function(e,t){var r=W(e,[]);return O.createElement(n,_({},r,{isChecked:r.checked,onChange:r.onChange,ref:t}),r.title)})),Z=function(e){var n=W(e,[]);return O.createElement(N,{value:n.value,tinymceScriptSrc:"/tinymce.min.js",onEditorChange:function(e){return n.onChange(e)},init:{directionality:"rtl",language:"fa",mobile:{menubar:!1,toolbar:"undo redo | formatselect | bold italic backcolor"},menubar:!1,height:300,toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat"}})},ee=I((function(e,n){var i=W(e,[]);return O.createElement(t,_({ref:n},i,{size:"sm",inputMode:"numeric",min:0,max:1/0,value:i.value||0===i.value?i.value:""}),O.createElement(r,{bg:"#F0F5F7",p:"6"}),O.createElement(o,null,O.createElement(a,null),O.createElement(l,null)))})),ne=function(e){var n=W(e,[]);return O.createElement(i,{dir:"ltr"},O.createElement(u,null,O.createElement(c,{otp:!0,onChange:function(e){return n.onChange(e)},isInvalid:n.isInvalid,autoFocus:!0,size:"lg"},X([],Array(n.count)).map((function(e,n){return O.createElement(s,{key:n})})))))},te=function(e){return{control:function(n){return _(_({},n),{padding:"0.3rem",backgroundColor:"#f0f5f7",border:e.isInvalid?"2px solid #E53E3E":"1px solid #E2E8F0",borderRadius:"0.375rem","&focus":{borderColor:"#3182ce !important"}})},input:function(e){return _(_({},e),{color:"#696969",fontSize:"0.875rem"})},valueContainer:function(e){return _(_({},e),{color:"#696969",fontSize:"0.875rem"})},indicatorSeparator:function(e){return _(_({},e),{display:"none"})},indicatorsContainer:function(e){return _(_({},e),{color:"black"})},option:function(e,n){return _(_({},e),{color:n.isSelected?"white":"black",padding:"0.2rem",paddingRight:"0.5rem",fontFamily:"inherit !important",fontSize:"0.875rem","&:hover":_(_({},e),{fontSize:"0.875rem",padding:"0.2rem",color:"white",backgroundColor:"#0385ff !important"})})},loadingMessage:function(e,n){return _(_({},e),{fontSize:"0.875rem"})},noOptionsMessage:function(e,n){return _(_({},e),{fontSize:"0.875rem"})},multiValue:function(e,n){return _(_({},e),{background:"#e8f0fa",fontSize:"0.875rem"})}}},re=I((function(e,n){var t=W(e,[]);return O.createElement(D,_({},t,{isClearable:!0,isSearchable:!0,selectRef:n,defaultValue:t.value,styles:te(t),loadOptions:function(e,n){return $(void 0,void 0,void 0,(function(){var r,o,a,l;return J(this,(function(i){switch(i.label){case 0:return[4,U.get(""+t.fetchUrl+t.searchQueryFieldName+"="+e+"&"+(null!==(o=t.offsetQueryFieldName)&&void 0!==o?o:"SkipCount")+"="+n.length)];case 1:return[2,{options:(r=i.sent()).data[null!==(a=t.resultFieldName)&&void 0!==a?a:"items"],hasMore:r.data[null!==(l=t.totalCountFieldName)&&void 0!==l?l:"totalCount"]>n.length}]}}))}))},placeholder:"انتخاب کنید.",noOptionsMessage:function(e){return"گزینه ای مرتبط با "+e.inputValue+" یافت نشد."},loadingMessage:function(){return"در حال بارگزاری..."},onChange:function(e,n){return t.onChange(e,n)},components:{LoadingIndicator:function(){return O.createElement(f,{size:"sm",colorScheme:"blue"})}}}))})),oe=function(e){var n=W(e,[]),t=j(),r=t[0],o=t[1];return O.createElement(O.Fragment,null,O.createElement(d,_({"aria-label":["min","max"],min:1300,max:1401,defaultValue:[1350,1380]},n,{onChangeEnd:function(e){return o(e)}}),O.createElement(m,null,O.createElement(p,null)),O.createElement(v,{index:0}),O.createElement(v,{index:1})),O.createElement(i,null,O.createElement(g,{colorScheme:"blue",py:"1",px:"4"},null==r?void 0:r[0]," - ",null==r?void 0:r[1])))},ae=function(e){var n=W(e,[]);return O.createElement(h,{onChange:n.onChange})},le=function(e){var n=W(e,[]);return O.createElement(b,_({},n,{bg:"#F0F5F7"}))},ie=I((function(e,n){var t=W(e,[]);return O.createElement(y,_({},t,{onChange:t.onChange,ref:n,value:t.value||"",bg:"#f0f5f7",p:"6",color:"#696969",_focus:{bg:"white",border:"1px solid #1967D2"}}))})),ue=function(e,n,t,r){var o=j(null),a=o[0],l=o[1];return T((function(){r&&function(e,n,t){var r=document.getElementById(e);if(r){var o=window.grecaptcha;l(o)}else{var a=document.createElement("script");a.type="text/javascript",a.src=n,a.id=e,a.onload=function(){var e=window.grecaptcha;e.ready((function(){l(e)}))},document.body.appendChild(a)}r&&t&&t()}("recaptcha-key","https://www.google.com/recaptcha/api.js?render="+n,(function(){}))}),[e]),[V((function(){return $(void 0,void 0,void 0,(function(){return J(this,(function(e){switch(e.label){case 0:if(!a||!a.execute)throw new Error("Google Recaptcha has not been loaded");return[4,a.execute(n,{action:"submit"})];case 1:return[2,e.sent()]}}))}))}),[a])]},ce=O.createContext(void 0);function se(e){var n,t=this,r=E({position:"top",isClosable:!0,variant:"top-accent"}),o=ue("recaptcha-key",e.recaptchaApiKey,0,null!==(n=e.doesHaveRecaptcha)&&void 0!==n&&n)[0],a=e.formSchema.describe(),l=B(e.mutationFunction,{retry:0}),i=M({resolver:q(e.formSchema),defaultValues:e.defaultValues?e.defaultValues:void 0});return O.createElement(ce.Provider,{value:{formSchema:a,control:i.control,translation:e.translation,router:e.router,isLoading:l.isLoading,isError:l.isError}},O.createElement(L,_({},i),O.createElement("form",{noValidate:!0,style:{width:"100%"},onSubmit:i.handleSubmit((function(n){return $(t,void 0,void 0,(function(){var t;return J(this,(function(a){switch(a.label){case 0:return e.doesHaveRecaptcha?[4,o()]:[3,2];case 1:t=a.sent(),n=_(_({},n),{captchaToken:t}),a.label=2;case 2:return l.mutate(n,{onSuccess:function(t){e.showToastOnSuccess&&r({title:e.successToastMessage,status:"success"}),e.onSubmitSucess&&e.onSubmitSucess(t.data,n)},onError:function(e){r({title:e.code,description:e.message,status:"error"})}}),console.log(n),[2]}}))}))}),(function(n){e.onError&&e.onError(n)}))},e.children)))}function fe(){var e=O.useContext(ce);if(void 0===e)throw new Error("useAminook must be used within a FormBuilder Tag");return e}var de=function(){return O.createElement(C,{h:"12"})},me=I((function(e,n){var t=W(e,[]);return t.options?O.createElement(pe,_({ref:n},t)):t.fetchUrl?O.createElement(ve,_({ref:n},t)):O.createElement(w,null)})),pe=I((function(e,n){var t,r=W(e,[]);return O.createElement(w,{ref:n,onChange:r.onChange,bg:"#F0F5F7",size:"lg",fontSize:"sm"},null===(t=r.options)||void 0===t?void 0:t.map((function(e){return O.createElement("option",{value:e.value,key:e.value},e.label)})))})),ve=I((function(e,n){var t=W(e,[]),r=G(t.fetchUrl,(function(){return U.get(t.fetchUrl).then((function(e){return e.data}))}),{select:function(e){return e.items.map((function(e){return{label:t.labelProperty?e[t.labelProperty]:e.label,value:t.valueProperty?e[t.valueProperty]:e.value}}))}}),o=r.data;return r.isLoading?O.createElement(de,null):O.createElement(pe,_({ref:n,options:o},t))})),ge=I((function(e,n){var t,r=W(e,[]),o=j(),a=o[0],l=o[1],i=j(null!==(t=r.value)&&void 0!==t?t:[]),u=i[0],c=i[1],s=V((function(e){l(e)}),[]),f=V((function(e){if(a)switch(e.key){case"Enter":case"Tab":e.preventDefault(),e.stopPropagation(),l(""),c((function(e){return X(X([],e),[{label:a,value:a}])})),r.onChange(u.map((function(e){return e.value})).concat(a).join(",")),l("")}}),[a]),d=V((function(e,n){r.onChange(e.map((function(e){return e.value})).join(",")),c(e)}),[c]);return O.createElement(H,_({},r,{components:{DropdownIndicator:null},inputValue:a,isMulti:!0,menuIsOpen:!1,styles:te(r),onChange:d,onInputChange:s,onKeyDown:f,value:u}))})),he=I((function(n,t){var r,o,a,l,i,u,c,s,f,d=W(n,[]),m=A("validations")[0],p=fe(),v=p.translation,g=p.router,h=p.formSchema.fields[d.name],b=null!==(r=null==h?void 0:h.meta)&&void 0!==r?r:d.fieldSetting,y={name:d.name,value:d.value};return O.createElement(S,{my:d.my,mx:d.mx,display:"inline-block",w:{base:null!==(a=null===(o=d.width)||void 0===o?void 0:o.base)&&void 0!==a?a:"full",md:null!==(i=null===(l=d.width)||void 0===l?void 0:l.md)&&void 0!==i?i:"full"}},O.createElement(x,{display:d.hidden?"none":"initial",isInvalid:!!d.error,isRequired:null!==(u=null==h?void 0:h.tests.some((function(e){return"required"===e.name})))&&void 0!==u&&u},!(null==b?void 0:b.hideLabel)&&"checkbox"!==b.type&&O.createElement(k,{htmlFor:d.name,fontSize:"sm",fontWeight:"bold"},(null==h?void 0:h.label)?null==h?void 0:h.label:(null===(c=null==d?void 0:d.fieldSetting)||void 0===c?void 0:c.label)?null===(s=null==d?void 0:d.fieldSetting)||void 0===s?void 0:s.label:v((g?null==g?void 0:g.pathname:window.location.pathname)+".form.labels."+d.name)),function(){var n,r,o,a;switch(null!==(n=null==b?void 0:b.type)&&void 0!==n?n:null===(r=d.fieldSetting)||void 0===r?void 0:r.type){case"input-text":case"input-mask":return O.createElement(ie,_({ref:t},_(_({},y),null==b?void 0:b.fieldProps),{onChange:function(e){d.onChange(function(e){var n=[/۰/g,/۱/g,/۲/g,/۳/g,/۴/g,/۵/g,/۶/g,/۷/g,/۸/g,/۹/g],t=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g];if("string"==typeof e)for(var r=0;r<10;r++)e=e.replace(n[r],r.toString()).replace(t[r],r.toString());return e}(e.target.value))}}));case"input-number":return O.createElement(ee,_({ref:t},_(_({},y),null==b?void 0:b.fieldProps),{onChange:function(e,n){d.onChange(n)}}));case"checkbox":return O.createElement(Y,_({ref:t},null==b?void 0:b.fieldProps,y,{checked:y.value,title:null==h?void 0:h.label,onChange:function(e){return d.onChange(e.target.checked,e)}}));case"select":return O.createElement(me,_({ref:t},null==b?void 0:b.fieldProps,y,{onChange:function(e){return d.onChange(e.target.value,e)}}));case"switch":return O.createElement(ae,_({},y,null==b?void 0:b.fieldProps,{onChange:function(e){return d.onChange(e.target.checked)}}));case"text-area":case"text-area":return O.createElement(le,_({},y,null==b?void 0:b.fieldProps,{onChange:function(e){return d.onChange(e.target.value,e)}}));case"slider":return O.createElement(oe,_({},d,null==b?void 0:b.fieldProps));case"input-pin":return O.createElement(ne,_({},y,null==b?void 0:b.fieldProps,{isInvalid:!!d.error,onChange:function(e){return d.onChange(e)}}));case"editor":return O.createElement(Z,{value:d.value,onChange:function(e){return d.onChange(e)}});case"uploader":return O.createElement(e,_({},null==b?void 0:b.fieldProps));case"reach-select":return O.createElement(re,_({ref:t},null==b?void 0:b.fieldProps,{isInvalid:!!d.error},y,{onChange:function(e){d.onChange(e)}}));case"input-tag":return O.createElement(ge,_({ref:t},null==b?void 0:b.fieldProps,{isInvalid:!!d.error},y,{onChange:function(e){d.onChange(e)},value:null===(a=null===(o=d.value)||void 0===o?void 0:o.split(","))||void 0===a?void 0:a.map((function(e){return{value:e,label:e}}))}));default:return O.createElement(S,null,"Unrecognized field type.")}}(),!!(null==b?void 0:b.helperText)&&O.createElement(P,{fontSize:"xs"},null==b?void 0:b.helperText),!!d.error&&O.createElement(F,{fontSize:"xs"},v?m(d.error.type,{path:v((g?g.pathname:window.location.pathname)+".form.labels."+d.name),value:d.value}):null===(f=d.error)||void 0===f?void 0:f.message)))})),be=function(e){var n=W(e,[]),t=fe().control;return O.createElement(R,{name:n.name,control:t,render:function(e){var t=e.field,r=e.fieldState;return e.formState,O.createElement(he,_({error:r.error},_(_(_({},n),r),t)))}})},ye=function(e){e.type;var n=e.text;e.onClick;var t=fe().isLoading;return O.createElement(S,{mt:"10"},O.createElement(z,{isLoading:t,loadingText:"در حال ذخیره اطلاعات...",type:"submit",variant:"primary_dark"},n))},Ee=/09(1[0-9]|3[1-9]|2[1-9])-?[0-9]{3}-?[0-9]{4}/,Ce=/^0[0-9]{2,}[0-9]{7,}$/,we=[/۰/g,/۱/g,/۲/g,/۳/g,/۴/g,/۵/g,/۶/g,/۷/g,/۸/g,/۹/g],Se=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g],xe=K().transform((function(e,n){return K().isType(e)&&null!==e?function(e){if("string"==typeof e)for(var n=0;n<10;n++)e=e.replace(we[n],""+n).replace(Se[n],""+n);return e}(e):e})),ke=function(){return Q().transform((function(e,n){return e?e.value:n?n.value:null}))};export{be as ControlledFormControl,se as FormBuilder,he as FormControl,ye as FormSubmitButton,me as Select,xe as inherentNumberString,Ee as mobileIranValidation,Ce as phoneNumberIranValidation,ke as selectWithValueExtractor,fe as useAminook};
//# sourceMappingURL=index.js.map
